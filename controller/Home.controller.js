sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel"],function(e,s){"use strict";return e.extend("crm.crmbatchtest.controller.Home",{ALL_STAGES:["HSM","Pickling","Oiling","Rewinding","Color Coating","Galvanizing"],onInit:function(){const e=this._createRoutingModel();const t={selectedBatch:"H12345",batchList:Object.keys(e).map(e=>({id:e})),batches:e};t.current=this._deriveDashboardData(t.selectedBatch,e[t.selectedBatch]);this.getView().setModel(new s(t))},_createRoutingModel:function(){return{H12345:{required:5,current:2,delay:2,sold:false,physical:260,sap:245,soReserved:85,soOpen:92},H12346:{required:2,current:2,delay:null,sold:true,physical:200,sap:200,soReserved:40,soOpen:40},H12347:{required:3,current:3,delay:null,sold:false,physical:180,sap:180,soReserved:50,soOpen:60},H12348:{required:5,current:4,delay:null,sold:false,physical:300,sap:295,soReserved:70,soOpen:80},H12349:{required:5,current:5,delay:null,sold:false,physical:320,sap:320,soReserved:100,soOpen:90},H12350:{required:1,current:1,delay:null,sold:true,physical:150,sap:150,soReserved:30,soOpen:30},H12351:{required:4,current:2,delay:2,sold:false,physical:210,sap:205,soReserved:60,soOpen:70},H12352:{required:3,current:1,delay:null,sold:false,physical:170,sap:170,soReserved:55,soOpen:65},H12353:{required:5,current:5,delay:null,sold:false,physical:400,sap:390,soReserved:120,soOpen:110},H12354:{required:2,current:0,delay:null,sold:false,physical:130,sap:125,soReserved:20,soOpen:30}}},_deriveDashboardData:function(e,s){const t=this.ALL_STAGES[s.current];const r=s.delay!==null?1:0;const n=s.soOpen-s.soReserved;const o=s.physical-s.soReserved;const a=s.physical-s.sap;const l=(s.sap/s.physical*100).toFixed(1);return{id:e,rootInfo:s.sold?`${t} â†’ SOLD`:`${t} â†’ In Process`,rootStatus:s.delay!==null?"ðŸ”´ Delay":"ðŸŸ¢ Normal",wip:{pickling:s.current>=1?12:0,oiling:s.current>=2?18:0,rewinding:s.current>=3?9:0,delay:r},so:{reserved:s.soReserved,open:s.soOpen,shortfall:n},mts:{unrestricted:s.physical,semi:40,net:o},aging:{fresh:s.current<3?s.physical:0,risk:s.current>=3?42:10,critical:s.current>=5?18:5},accuracy:{physical:s.physical,sap:s.sap,variance:a,percent:l}}},onBatchChange:function(e){const s=e.getSource().getSelectedKey();const t=this.getView().getModel();const r=t.getProperty("/batches/"+s);t.setProperty("/selectedBatch",s);t.setProperty("/current",this._deriveDashboardData(s,r))},onSectionPress:function(e){const s=e.getSource().data("type");this.getOwnerComponent().getRouter().navTo("batchList",{type:s})},onRootPress:function(){const e=this.getView().getModel().getProperty("/selectedBatch");this.getOwnerComponent().getRouter().navTo("batchDetail",{id:e})}})});
//# sourceMappingURL=Home.controller.js.map